{"ast":null,"code":"import{useEffect,useRef,useState}from'react';import'./MenuOptionBoth.css';import TopMenuOption from'./TopMenuOption';import CupOption from'./CupOption';import TempOption from'./TempOption';import{useShoppingCart}from'../hooks/shoppingCart';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MenuOptionBoth(_ref){let{menu,setOption}=_ref;const[shoppingCart,setShoppingCart]=useShoppingCart();const[totalPrice,setTotalPrice]=useState(0);const[count,setCount]=useState(1);const[isCupClicked,setIsCupClicked]=useState(null);const[isTempClicked,setIsTempClicked]=useState(null);const[loading,setLoading]=useState(false);const[activeTemp,setActiveTemp]=useState(null);const priceRef=useRef(0);const type=menu.menu_type;let price_same=false;if(menu.price_hot===menu.price_ice){price_same=true;}useEffect(()=>{let selectedPrice=0;if(menu.price_hot!=0&&menu.price_ice!=0){selectedPrice=Math.min(menu.price_hot,menu.price_ice);}if(menu.price_ice!=0&&menu.price_hot==0){selectedPrice=menu.price_ice;}if(menu.price_ice==0&&menu.price_hot==0){selectedPrice=menu.price_hot;}if(menu.price_ice==0&&menu.price_hot==0){selectedPrice=menu.price_constant;}priceRef.current=selectedPrice;if(type=='both'&&isTempClicked==='ice'&&!price_same){let priceDifference=Math.abs(menu.price_hot-menu.price_ice);selectedPrice+=priceDifference;}setTotalPrice((selectedPrice*count).toLocaleString());},[menu,count,isTempClicked]);const closeOption=()=>{setOption(false);};const handleCupClick=e=>{const clickedValue=e.target.value;setIsCupClicked(clickedValue);};const handleTempClick=value=>{setIsTempClicked(value);};const putItem=()=>{let itemOption={name:menu.name,count:count,temp:activeTemp,cup:isCupClicked,price:totalPrice};setShoppingCart(prevItem=>[...prevItem,itemOption]);closeOption();};useEffect(()=>{console.log(shoppingCart);},[shoppingCart]);return/*#__PURE__*/_jsx(\"div\",{className:\"option-container\",children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"top-menu-option\",children:/*#__PURE__*/_jsx(TopMenuOption,{name:menu.name,price:priceRef.current,count:count,setCount:setCount,img:menu.image})}),/*#__PURE__*/_jsxs(\"div\",{className:\"option-choose-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"option-box\",children:\"\\uBA54\\uB274 \\uC124\\uBA85\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{id:\"menu-description\",children:menu.description}),menu.category==='디저트'?null:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"option-box\",children:\"\\uBB34\\uB8CC \\uC635\\uC158\"}),/*#__PURE__*/_jsx(\"hr\",{}),price_same||type==='onlyice'||type==='onlyhot'?/*#__PURE__*/_jsx(TempOption,{isTempClicked:isTempClicked,handleTempClick:handleTempClick,price:{ice:menu.price_ice,hot:menu.price_hot},activeTemp:activeTemp,setActiveTemp:setActiveTemp}):null,/*#__PURE__*/_jsx(CupOption,{isCupClicked:isCupClicked,handleCupClick:handleCupClick}),/*#__PURE__*/_jsx(\"p\",{className:\"option-box\",children:\"\\uC720\\uB8CC \\uC635\\uC158\"}),/*#__PURE__*/_jsx(\"hr\",{}),!price_same&&type==='both'?/*#__PURE__*/_jsx(TempOption,{isTempClicked:isTempClicked,handleTempClick:handleTempClick,price:{ice:menu.price_ice,hot:menu.price_hot},activeTemp:activeTemp,setActiveTemp:setActiveTemp}):null]})]}),/*#__PURE__*/_jsx(\"hr\",{id:\"total-line\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"total-price-container\",children:[/*#__PURE__*/_jsx(\"span\",{id:\"total-price-KR\",children:\"\\uCD1D \\uAE08\\uC561\"}),/*#__PURE__*/_jsx(\"span\",{id:\"detail-price\",children:\"(\\uC81C\\uD488\\uAC00\\uACA9+\\uC635\\uC158\\uAC00\\uACA9)\"}),/*#__PURE__*/_jsxs(\"span\",{id:\"total-price-WON\",children:[\"\\uFFE6 \",totalPrice]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"out-button\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"cancel-button\",onClick:closeOption,children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"button\",{id:\"hold-button\",onClick:putItem,children:\"\\uB2F4\\uAE30\"})]})]})});}export default MenuOptionBoth;","map":{"version":3,"names":["useEffect","useRef","useState","TopMenuOption","CupOption","TempOption","useShoppingCart","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","MenuOptionBoth","_ref","menu","setOption","shoppingCart","setShoppingCart","totalPrice","setTotalPrice","count","setCount","isCupClicked","setIsCupClicked","isTempClicked","setIsTempClicked","loading","setLoading","activeTemp","setActiveTemp","priceRef","type","menu_type","price_same","price_hot","price_ice","selectedPrice","Math","min","price_constant","current","priceDifference","abs","toLocaleString","closeOption","handleCupClick","e","clickedValue","target","value","handleTempClick","putItem","itemOption","name","temp","cup","price","prevItem","console","log","className","children","img","image","id","description","category","ice","hot","onClick"],"sources":["/Users/chae-jeongwon/github/kiosk/src/component/MenuOptionBoth.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport './MenuOptionBoth.css';\nimport TopMenuOption from './TopMenuOption';\nimport CupOption from './CupOption';\nimport TempOption from './TempOption';\nimport { useShoppingCart } from '../hooks/shoppingCart';\n\nfunction MenuOptionBoth({ menu, setOption }) {\n  const [shoppingCart, setShoppingCart] = useShoppingCart();\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [count, setCount] = useState(1);\n  const [isCupClicked, setIsCupClicked] = useState(null);\n  const [isTempClicked, setIsTempClicked] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [activeTemp, setActiveTemp] = useState(null);\n  const priceRef = useRef(0);\n\n  const type = menu.menu_type;\n\n  let price_same = false;\n  if (menu.price_hot === menu.price_ice) {\n    price_same = true;\n  }\n\n  useEffect(() => {\n    let selectedPrice = 0;\n\n    if (menu.price_hot != 0 && menu.price_ice != 0) {\n      selectedPrice = Math.min(menu.price_hot, menu.price_ice);\n    }\n    if (menu.price_ice != 0 && menu.price_hot == 0) {\n      selectedPrice = menu.price_ice;\n    }\n    if (menu.price_ice == 0 && menu.price_hot == 0) {\n      selectedPrice = menu.price_hot;\n    }\n    if (menu.price_ice == 0 && menu.price_hot == 0) {\n      selectedPrice = menu.price_constant;\n    }\n\n    priceRef.current = selectedPrice;\n\n    if (type == 'both' && isTempClicked === 'ice' && !price_same) {\n      let priceDifference = Math.abs(menu.price_hot - menu.price_ice);\n      selectedPrice += priceDifference;\n    }\n\n    setTotalPrice((selectedPrice * count).toLocaleString());\n  }, [menu, count, isTempClicked]);\n\n  const closeOption = () => {\n    setOption(false);\n  };\n\n  const handleCupClick = (e) => {\n    const clickedValue = e.target.value;\n    setIsCupClicked(clickedValue);\n  };\n\n  const handleTempClick = (value) => {\n    setIsTempClicked(value);\n  };\n\n  const putItem = () => {\n    let itemOption = {\n      name: menu.name,\n      count: count,\n      temp: activeTemp,\n      cup: isCupClicked,\n      price: totalPrice,\n    };\n    setShoppingCart((prevItem) => [...prevItem, itemOption]);\n    closeOption();\n  };\n\n  useEffect(() => {\n    console.log(shoppingCart);\n  }, [shoppingCart]);\n\n  return (\n    <div className=\"option-container\">\n      {loading ? (\n        <p>Loading...</p>\n      ) : (\n        <>\n          <div className=\"top-menu-option\">\n            <TopMenuOption\n              name={menu.name}\n              price={priceRef.current}\n              count={count}\n              setCount={setCount}\n              img={menu.image}\n            />\n          </div>\n          <div className=\"option-choose-container\">\n            <p className=\"option-box\">메뉴 설명</p>\n            <hr />\n            <p id=\"menu-description\">{menu.description}</p>\n            {menu.category === '디저트' ? null : (\n              <>\n                <p className=\"option-box\">무료 옵션</p>\n                <hr />\n                {price_same || type === 'onlyice' || type === 'onlyhot' ? (\n                  <TempOption\n                    isTempClicked={isTempClicked}\n                    handleTempClick={handleTempClick}\n                    price={{ ice: menu.price_ice, hot: menu.price_hot }}\n                    activeTemp={activeTemp}\n                    setActiveTemp={setActiveTemp}\n                  />\n                ) : null}\n                <CupOption\n                  isCupClicked={isCupClicked}\n                  handleCupClick={handleCupClick}\n                />\n                <p className=\"option-box\">유료 옵션</p>\n                <hr />\n                {!price_same && type === 'both' ? (\n                  <TempOption\n                    isTempClicked={isTempClicked}\n                    handleTempClick={handleTempClick}\n                    price={{ ice: menu.price_ice, hot: menu.price_hot }}\n                    activeTemp={activeTemp}\n                    setActiveTemp={setActiveTemp}\n                  />\n                ) : null}\n              </>\n            )}\n          </div>\n          <hr id=\"total-line\" />\n          <div id=\"total-price-container\">\n            <span id=\"total-price-KR\">총 금액</span>\n            <span id=\"detail-price\">(제품가격+옵션가격)</span>\n            <span id=\"total-price-WON\">￦ {totalPrice}</span>\n          </div>\n          <div id=\"out-button\">\n            <button id=\"cancel-button\" onClick={closeOption}>\n              취소\n            </button>\n            <button id=\"hold-button\" onClick={putItem}>\n              담기\n            </button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default MenuOptionBoth;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}